<% let title = checklist.name %>

<%- include('../layouts/header', {title:title}) %>

<%- include('../layouts/menu') %>

<section class="section">
    <div class="container">
      <div class="columns">
        <div class="column is-four-fifths">
          <h1 class="title size-4"><%= checklist.name%></h1>
        </div>
        <div class="column is-one-fifth">
          <a href="/checklists" class="button is-small" >Go Back</a>
          <a href="/checklists/<%= checklist._id %>/jsonreq %>" target="_blank" class="button is-small '">Request in JSON</a>
          <a href="/checklists/<%= checklist._id %>/tasks/new" class="button is-success is-small">New Task</a>
        </div>
      </div>

      <hr />

      <% checklist.tasks.forEach(task => { %>
      <div class="columns">
        <div class="column is-four-fifths <%= task.done ? 'has-text-success is-italic' : '' %>">
          <input type="checkbox" 
            onchange="setTagAsDone(this, '<%= task._id %>')"
            <%= task.done ? 'checked' : '' %>
          /> 
          <%= task.name %>
        </div>
        <div class="column is-one-fifth">
          <a href="/tasks/<%= task._id %>?_method=DELETE">
            <button class="button is-danger ">Delete</button>
          </a>
        </div>
      </div>  
      <% }) %>


    </div>
  </section>


<%- include('../layouts/footer') %>